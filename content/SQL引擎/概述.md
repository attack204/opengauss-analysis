---
# Title, summary, and page position.
title: SQL引擎概述 
linktitle: SQL引擎概述
summary: SQL引擎概述
weight: 1
# icon: book
# icon_pack: fas

# Page metadata.
date: '2022-06-15T00:00:00Z'
type: book # Do not modify.
toc: true
---

# SQL引擎概述

## SQL解析

词法分析：从查询语句中识别出系统支持的关键字、标识符、运算符等

语法分析：根据词法分析的结果，为每个“词”匹配相应的语法规则，并生成相应的抽象树(AST)

语义分析：对语法树进行有效性检查，检查语法树中对应的表、列、函数、表达式是否有对应的元数据，将AST转化为查询计划

![](https://cdn.attack204.com/iShot2022-06-15_12.42.10.png)


## 查询优化

查询优化的技术有

1. RBO(Rule Based Optimizaiton, 基于规则的查询优化)：根据预定义的启发式规则对SQL语句进行优化
2. CBO(Cost Based Optimization, 基于代价的查询优化)：对SQL语句对应的待选执行路径进行代价估算，从待选路径中选择代价最低的执行路径作为最终的执行计划
3. ABO(AI Based Optimization)：根据AI经验对查询进行优化

openGauss采用CBO的方式，同时也在探索ABO模式

### 查询重写

#### 概念

顾名思义就是对查询的语句改变顺序以提高其查询效率

需要遵循的基本原则：等价性与高效性

#### 关系代数式等价变化

根据关系代数式的等价变化，灵活地利用关系代数的等价关系来进行优化推导

1. 借助分配律使操作下推
2. 
